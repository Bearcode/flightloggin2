{% extends "base.html" %}
{% block logbook-sel %}nav_selected{% endblock%}

{% block javascript %}
<script type="text/javascript" src="{{ MEDIA_URL }}/javascripts/popup.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}/javascripts/new_entry_popup.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}/javascripts/logbook.js"></script>

<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/css/logbook.css">
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/css/new_flight_popup.css">
{% endblock %}





{% block title %}Flights{% endblock %}

{% block canvas %}

	<input id="new_flight_button" type="button" value="New Flight" />
	
	{% include "pagination_table.html" %}
		
	<table id="logbook_table" summary="logbook table">
		<thead>
			<tr>
                    {{ columns.header_row|safe }}
			</tr>
		</thead>
		
		<tfoot>
			<tr>
				<td colspan="3" id="page_total_title">Page Totals:</td>
    
                   {% for column in totals_columns %}
                        <td class="{{column}} pt"></td>
                    {% endfor %}

				<td colspan="6"></td>
			</tr>
			<tr>
				<td colspan="3" id="overall_total_title">Overall Totals:</td>

                    {% for column in overall_totals %}
                        <td>{{column}}</td>
                    {% endfor %}
                    
				<td colspan="6">
				    {% if flights %}
					<a href="{% url mass-edit page_of_flights.number %}">Mass Edit</a>
					&nbsp; &nbsp;
					{% endif %}
					<a href="" id="toggle_columns">Show All Columns</a>
				</td>
			</tr>
		</tfoot>
		
		<tbody>

		{% for row in logbook %}
	    <tr class="{% cycle 'odd' 'even' %}" id="tr{{ row.pk }}">

            <td class="date_col" title="Date (click to edit)">
        	    <span class="unformatted_date">{{ row.date }}</span>
                <a href="" id="f{{row.pk}}">{{ row.date|date:date_format }}</a>                        {# date #}
            </td>

            <td class="plane_col" title="Plane">{{ row.plane }}</td>                                   {# plane #}

            <td class="route_col" title="Route">                                                       {# route #}
                <span class="unformatted_route">{{row.raw_route}}</span>{{ row.route|safe }}
            </td>

            {% for item in row %}
            <td title="{{item.title}}" class="{{item.system}}_col">{{item.extra}}{{item.disp}}</td>    {# all other columns #}
            {% endfor %}
            
             <td class="remarks_col" title="Remarks">                                                  {# remarks #}
                <span class="flying_event">{{row.events}}</span>
                <span class="remarks">{{ row.remarks }}</span>
             </td>
		</tr>
		{% empty %}
	
		<tr>
			<td colspan="21" class="empty_logbook">No flights to display</td>
		</tr>
			
		{% endfor %}
		</tbody>
	</table>
	
	{% include "pagination_table.html" %}
{% include "new_flight.html" %}
{% endblock %}

