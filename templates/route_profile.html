{% extends "base.html" %}

{% block description %}{{ pk|upper }} route profile{% endblock%}

{% block javascript %}
<link rel="stylesheet" type="text/css" href="{{ CSS_URL }}/item_profile.css">
{% endblock %}

{% block title %}Route Profile - {{ pk|upper }}{% endblock %}


{% block canvas %}

<h1>{{ pk|upper }}</h1>

<table id="route_table">
{% for rb in rbs %}
    <tr>      {% url profile-location rb.location.identifier as url %}
        <td><a href="{{ url }}">{{ rb.location.identifier }}</a></td>
        <td>{{ rb.location.name }} - {{ rb.location.location_summary }}</td>
    </tr>
{% endfor %}
    <tr>
        <td colspan="2">Total distance: {{ route.total_line_all|floatformat:1 }} NM</td>
    </tr>
</table>

<h2>Users who have flown this route</h2>

{% spaceless %}
{% for user in users %}
    
    {# the span is so it works with spaceless better #}
    {% if not forloop.first %}<span>, </span>{% endif %}
    
    {% if user.get_profile.logbook_share %}
    
        <a title="This user does not allow others to view his/her logbook"
           class="noshare" href="">{{user.username}}</a>
           
    {% else %}
    
        <a href="{% url logbook user.username %}"
           title="Click to see this user's logbook">{{user.username}}</a>
           
    {% endif %}
    
{% empty %}

    (None)

{% endfor %}
{% endspaceless %}

<h2>Total number of flights logged with this route</h2>
<big><strong>{{ t_flights }}</strong></big>

<h2>Tailnumbers that have flown this route:</h2>
{% spaceless %}
    {% for tn in tailnumbers %}
        {% url profile-tailnumber tn|upper as url %}
        
        {% if not forloop.first %}<span>, </span>{% endif %}
        
        <a href="{{ url }}">{{ tn }}</a>
    {% endfor %}
{% endspaceless %}

<h2>Types that have flown this route</h2>
<big><strong>{{ types|join:", " }}</strong></big>

{% endblock %}
