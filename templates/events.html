{% extends "base.html" %}
{% block events-sel %}nav_selected{% endblock%}

{% block description %}{{ display_user.username }}'s events{% endblock%}

{% block javascript %}
    <script type="text/javascript" src="{{ MEDIA_URL }}/javascripts/popup.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}/javascripts/event_popup.js"></script>
	<link rel="stylesheet" type="text/css" href="{{ CSS_URL }}/popup.css">
	<link rel="stylesheet" type="text/css" href="{{ CSS_URL }}/events.css">
{% endblock %}

{% block title %}Events{% endblock %}

{% block canvas %}

{% if not shared %}
    <input type="button" id="new_event" value="New Event">
{% endif %}

    <table class="minor_table">
        <thead>
       <tr>
           <td>Date</td>
           <td>Type</td>
           <td>Remarks</td>
       </tr>
       </thead>
    {% for nf in nonflights %}
       <tr id="row_{{nf.id}}">
           <td class="date" title="Date (click to edit)">
                <span class="unformatted_date">{{nf.date}}</span>
                <a class="nonflight_click" id="n{{nf.id}}" href="">{{ nf.date|date:date_format }}</a>
           </td>
           <td class="non_flying">{{ nf.get_non_flying_display }}</td>
           <td class="remarks">{{ nf.remarks }}</td>
       </tr>
    {% empty %}
    
       <tr><td colspan="3">Nothing to show here, sorry</td></tr>
       
    {% endfor %}    
    </table>

<div id="popup" title="New Event">
	<table id="dragbar">
		<tr>
			<td><span id="titlebar">New Event</span></td>
			<td><span id="close_x" title="Close this popup">[X]</span></td>
		</tr>
	</table>
	
	<form id="new_plane_form" action="{% url events display_user.username %}" method="post">
		<table>
			<tbody>
				<tr>
					<td>		
					    <input type="hidden" name="user" id="id_user" value="{{ user.id }}" />
						<input type="hidden" name="id" id="id_id" value="" />
					</td>
				</tr>
				<tr>
					<td>{{ form.date.label_tag }}</td>
					<td>{{ form.date }}<br><span class="help_text">{{form.date.help_text}}</span></td>
				</tr>
				<tr>
					<td>Event</td>
					<td>{{ form.non_flying }}<br><span class="help_text">{{form.non_flying.help_text}}</span></td>
				</tr>
			
				<tr>
					<td>{{ form.remarks.label_tag }}</td>
					<td>{{ form.remarks }}<br><span class="help_text">{{form.remarks.help_text}}</span></td>
				</tr>
			</tbody>
		</table>
		
    	<div id="new_buttons">
			<input type="submit" name="submit" value="Create New Event" />
		</div>
        {% if not shared %}
		<div id="edit_buttons">
			<input type="submit" name="submit" value="Submit Changes" />
			<input type="submit" name="submit" value="Delete Event" />
		</div>
        {% endif %}
	</form>
</div>


{% endblock %}
