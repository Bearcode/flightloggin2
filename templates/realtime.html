{% extends "base.html" %}
{% block realtime-sel %}nav_selected{% endblock%}

{% block javascript %}
	<link rel="stylesheet" type="text/css" href="{{ CSS_URL }}/realtime.css">
<script type="text/javascript">
    var users_system_ts = new Date().getTime() / 1000
    var SERVER_OFFSET = {{ gmt|date:"U" }} - users_system_ts;
    var URLS = {}
    URLS['go_on_duty'] = "{% url ajax_go_on_duty request.display_user %}"
    URLS['go_off_duty'] = "{% url ajax_go_off_duty request.display_user %}"
    
    $(document).ready(function() {
  
        {% if duty %}
        switch_to_on_duty({json: {duty: {id: {{duty.id}} }}})
        {% endif %}
        
    });
    
</script>
<script type="text/javascript" src="{{ MEDIA_URL }}/jquery/epiclock/jquery.epiclock.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}/javascripts/date_format.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}/javascripts/realtime.js"></script>
<style type="text/css">

    #clock_box                 {border: 1px solid green;
                                width: 15em;
                                color: #4AAE74;
                                margin: 0 auto 0 auto;
                                background: #B8FFD5}
    
    /* the individual clock digits */
    .epiclock                  {color: black;
                                font-size: large}
                                
    /* the entire clock block */                   
    #epiclock                  {padding: 2px}

    input[type="text"]         {width: 11em;}
    input[type="button"]       {margin: 5px}
    
    .on_duty      {width: 90%; background: lightgray; padding: 10px;
                   margin: 0 auto 0 auto;}
    
    .block        {width: 90%; background: lightblue; margin: 5px auto 5px auto;
                   border: 1px solid gray}

    .open_block   {background: pink !important}
    
    .block_table  {margin: 0 auto 0 auto}
    
    .duty_header_table      {font-size: bigger;
                             margin: 0 auto 0 auto;
                             border: 1px solid gray}
                             
    .duty_header_table td   {border: 1px solid gray; padding: 3px}
    
    .duty_header_table th   {text-align: right;
                             font-weight: normal;
                             border: 1px solid gray; padding: 3px}

    #hidden_duty_box        {display: none}
    
    .duty_box               {background: gray;
                             border: 1px solid darkgray;
                             padding: 5px;
                             margin: 5px}
</style>

{% endblock %}

{% block title %}Realtime{% endblock %}


{% block canvas %}
<div id="clock_box">
    <strong>The current time:</strong>
    <div id="epiclock"></div>
</div>


    <input id="go_on_duty" type="button" value="Go On Duty">
    
    <div id="hidden_duty_box" class="duty_box">
        <span>Went on at: <input type="text" id="on_duty_time"></span>
        <br>
        <input id="go_off_duty" type="button" value="Go Off Duty">
    </div>
    

<div class="block_div" style="display: none">    
    <input id="start_block" type="button" value="Start Block Time">
    <br>
    <input id="end_block" type="button" value="End Block Time">
</div>
{{form.errors}}
{% endblock %}














